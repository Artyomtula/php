<?php
declare(strict_types=1);

/*
ЗАДАНИЕ 1
- Создайте строковую переменную $login и присвойте ей значение ' User '
- Создайте строковую переменную $password и присвойте ей значение 'megaP@ssw0rd'
- Создайте строковую переменную $name и присвойте ей значение 'иван'
- Создайте строковую переменную $email и присвойте ей значение 'ivan@petrov.ru'
- Создайте строковую переменную $code и присвойте ей значение '<?=$login?>'
*/

$login = ' User ';
$password = 'megaP@ssw0rd';
$name = 'иван';
$email = 'ivan@petrov.ru';
$code = '<?=$login?>';

/**
 * Проверяет сложность пароля
 *
 * @param string $password Пароль для проверки
 * @return bool True если пароль соответствует требованиям, иначе false
 */
function checkPasswordComplexity(string $password): bool {
    // Минимум 8 символов
    if (strlen($password) < 8) {
        return false;
    }
    
    // Проверка на наличие хотя бы одной заглавной буквы
    if (!preg_match('/[A-Z]/', $password)) {
        return false;
    }
    
    // Проверка на наличие хотя бы одной строчной буквы
    if (!preg_match('/[a-z]/', $password)) {
        return false;
    }
    
    // Проверка на наличие хотя бы одной цифры
    if (!preg_match('/[0-9]/', $password)) {
        return false;
    }
    
    return true;
}
?>
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Использование функций обработки строк</title>
</head>
<body>
<h1>Использование функций обработки строк</h1>

<?php
/*
ЗАДАНИЕ 2
- Используя строковые функции, удалите пробельные символы в начале и конце переменной $login, а также сделайте все символы строчными (малыми)
- Проверьте значение переменной $password на сложность: пароль должен содержать минимум одну заглавную латинскую букву, одну строчную и одну цифру, а длина должна быть не меньше 8 символов. Оформите полученный код в виде пользовательской функции.
- Используя строковые функции, сделайте первый символ значения переменной $name прописной (большой)
- Используя функцию фильтрации переменных проверьте корректность значения $email
- Используя строковые функции выведите значение переменной $code в браузер в том же виде как она задана в коде
*/

// Обработка логина
$login = strtolower(trim($login));
echo "Обработанный логин: '$login'<br>";

// Проверка пароля
if (checkPasswordComplexity($password)) {
    echo "Пароль '$password' соответствует требованиям сложности<br>";
} else {
    echo "Пароль '$password' НЕ соответствует требованиям сложности<br>";
}

// Обработка имени
$name = mb_convert_case($name, MB_CASE_TITLE, 'UTF-8');
echo "Обработанное имя: $name<br>";

// Проверка email
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
    echo "Email '$email' корректен<br>";
} else {
    echo "Email '$email' некорректен<br>";
}

// Вывод кода как есть
echo "Значение переменной code: " . htmlspecialchars($code) . "<br>";
?>
</body>
</html>
